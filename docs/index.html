<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Meu Primeiro Dashboard Com Shiny</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <meta name="date" content="2021-03-19" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/custom-shiny.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Meu Primeiro Dashboard Com Shiny
### <img src = 'https://d33wubrfki0l68.cloudfront.net/9b0699f18268059bdd2e5c21538a29eade7cbd2b/67e5c/img/logo/cursor1-5.png' width = '70%'>
### 2021-03-19

---





class: middle

## Neste curso vamos aprender

### 1. Como criar um Aplicativo Web com Shiny

### 2. Reatividade (Reactivity)

### 3. Layouts (shinydashboard)

### 4. Disponibilizar no Shinyapps.io

&lt;img src="img/hex-shiny.png" style="position: fixed; top: 250px; right: 75px; z-index: 1;" width="15%"&gt;

---
class: middle

## Dashboards dinâmicos

&lt;img src="img/como-funciona.png"&gt;

.footnote[
fonte: [rstudio.com/shiny/](http://www.rstudio.com/shiny/)
]

---
class: middle, center

&lt;img src="img/hex-shiny.png" style="position: fixed; top: 50px; left: 75px; z-index: 1;" width="9%"&gt;

&lt;img src="img/shiny.png" width = "50%"&gt;

&lt;img src="img/shiny2.png" width = "50%"&gt;

### Motivação:

### [Shiny Gallery](https://shiny.rstudio.com/gallery/)

### [Show me Shiny Website](https://www.showmeshiny.com/)

---

## Olá Mundo


```r
library(shiny)

ui &lt;- fluidPage("Hello World!")

server &lt;- function(input, output, session) {
  
}

shinyApp(ui, server)
```

---
class: middle, center

## Ao R!

&lt;img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" width = "300" height = "300"&gt;

---

## Inputs e Outputs


&lt;img src="img/inputs_outputs.png" width = "500" height = "300"&gt;


```r
ui &lt;- fluidPage(
  # *Input() functions,
  # *Output() functions
)
```


---

## Inputs 

&lt;img src="img/inputs.png", width = "100%"&gt;

.footnote[
fonte: [rstudio.com/shiny/](http://www.rstudio.com/shiny/)
]


---

## Outputs

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Function &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Output &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; imageOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; image &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; plotOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; plot &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; tableOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; table &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; textOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; text &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; verbatimOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; text &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; htmlOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; raw HTML &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dataTableOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; interactive table &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; uiOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; a Shiny UI element &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

## No exemplo do "hello world" vamos...

1) inserir um slider input que aceita valores entre 1 e 100.

2) Reservar uma área para um gráfico por meio do `plotOutput("hist")`.

3) inserir um textInput() com o parâmetro `inputId = "titulo"`. (exercício!)

---

## Server



```r
server &lt;- function(input, output, session) {
  
  
  
  
  
  
}
```

---

## Server


```r
server &lt;- function(input, output, session) {
  
  output$hist &lt;- renderPlot({
    hist(rnorm(100))    
  })
  
}
```



Lembre-se do nosso UI...


```r
ui &lt;- fluidPage(
  
  ...
  
  plotOutput("hist")
)
```


---

## Server

### render*() functions

.pull-left[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; *output() &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; render*() &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; imageOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderImage() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; plotOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderPlot() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; tableOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderTable() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; textOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderText() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; verbatimOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderText() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; htmlOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderUI() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; dataTableOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderDataTable() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; uiOutput() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; renderUI() &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


]

.pull-right[


```r
# ui
plotOutput("hist")
```


```r
# server
output$hist &lt;- renderPlot({
  hist(rnorm(100))    
})
```


]


---

## Reactive Values e Reactive Functions

Use input values with **`input$`**

.pull-left[

&lt;img src="img/inputvalues.png" width= "100%"&gt;

]

.pull-right[
&lt;img src="img/sliderinputexample.png" width= "80%"&gt;


- `render*()` são **reactive functions**

- `input$*` são **reactive values**


]

.footnote[
fonte: [rstudio.com/shiny/](http://www.rstudio.com/shiny/)
]

---

## Reactive Values e Reactive Functions

Se colocarmos **`input$num`** dentro de uma **`renderPlot()`** no nosso exemplo, o output iria **`reagir`** caso o slider fosse mexido pelo usuário.


```r
# server
output$hist &lt;- renderPlot({
  hist(rnorm(input$num))    
})
```



---

## Server

### Recapitulação:

Dentro da função `server`,

1) Guarde o output desejado usando **`output$hist &lt;-`**

2) Alimente o output **`renderALGUMACOISA()`** com códigos

3) Acesse os **input values** com **`input$ALGUMACOISA`**

4) Crie reactividade usando  **`input$*`** dentro das funções **`renderALGUMACOISA()`**


```r
# server
output$hist &lt;- renderPrint({
  hist(rnorm(input$num))    
})
```

---

## Voltando ao nosso exemplo do "hello world"...

3) Vamos fazer o título do histograma de um `textInput("titulo")` + `input$titulo`. (exercício!)

4) Agora crie um **`verbatimTextOutput("sumario")`** na parte do ui;

5) Finalmente, na parte do server, coloque **`summary(rnorm(input$num))`** dentro do **`renderPrint({})`**. (exercício!)

---

class: middle, center, inverse

# Reactivity

---

## Reatividade

Reatividade é a relação entre **reactive values** e **reactive functions**: **reactive values** acionam **reactive functions**

&lt;img src="img/reactive1.png" width= "100%"&gt;

---

## Contextos de reatividade

Reactive values **TEM** que ser usados dentro de um **Contexto de reatividade**.

### Correto


```r
# server
* output$hist &lt;- renderPlot({hist(rnorm(input$num))})
```

### Errado


```r
# server
output$hist &lt;- hist(rnorm(input$num))
```

Códigos dentro do `renderPlot({})`, por exemplo, estarão dentro de um Contexto de Reatividade.

---

## Funções reativas

### Principais reactive functions no Shiny

- **`renderALGUMACOISA({})`**

- **`reactive({})`**

- **`isolate({})`**

- **`observe({})`**

- **`eventReactive({})`**

- **`oberveEvent({})`**

---

## Funções reativas

### **`reactive({})`**

Constrói uma **reactive expression** (se comporta como o **`input$ALGUMACOISA`**!).


```r
# server
data &lt;- reactive({
  rnorm(input$num)
})
```

É usada como uma função qualquer (repare nos parênteses `()` na ponta):


```r
# server
output$summary &lt;- renderPrint({
  summary(data())
})
```

---

## Funções reativas

### **`reactive({})`**

&lt;img src="img/reactive2.png" width= "80%"&gt;

1) Exercício: crie o **reactive expression** data() no  'hello world'.

.footnote[
fonte: [rstudio.com/shiny/](http://www.rstudio.com/shiny/)
]


---

## Funções reativas

### **`isolate({})`**

Desliga a reatividade de um **reactive value**.


```r
# server
output$hist &lt;- renderPlot({
  titulo &lt;- isolate(input$titulo)
  hist(data(), main = titulo)
})
```

Agora **`renderPlot({})`** NÃO vai reagir se **`input$titulo`** mudar.



---

## Funções reativas

### **`observeEvent({})`**

Útil para acionar um bloco de códigos no server toda vez que um **`input$*`** dentro dele mudar.


```r
# ui
actionButton("salvar_dados", "Salve os dados em CSV")
```


```r
# server
observeEvent(input$salvar_dados, {
  write.csv(dados(), "dados.csv")
})
```

PS: `actionButton()` é um tipo de input útil com **`observeEvent()`**. Ver [Using Action Button](https://shiny.rstudio.com/articles/action-buttons.html) da documentação oficial do Shiny.

Exercício: coloque a funcionalidade 'salvar_dados' no 'hello world'.

---

## Funções reativas

### **`observe({})`**

Também útil pra acionar bloco de códigos, mas qualquer **reactive value** dentro dele vai acioná-lo.


```r
# server
observe({
  print(dados())
  print(as.numeric(input$salvar_dados))
})
```

No exemplo, o código será rodado ou se `dados()` mudar ou se `input$salvar_dados` mudar.

---

## Funções reativas

### **`eventReactive({})`**


Cria um **reactive value** que se mudifica quando qualquer **`input$ALGUMACOISA`** dentro dele mudar.


```r
# ui
actionButton("atualizar", "atualizar!")
```


```r
# server
data &lt;- eventReactive(input$atualizar, {
  write.csv(dados(), "dados.csv")
})
```


Exercício: coloque esse reactiveEvent dentro do 'hello world'.


---

class: middle, center, inverse

# Layouts

## [shiny.rstudio.com/layout-guide](https://shiny.rstudio.com/articles/layout-guide.html)

---

## Mas antes... Tags de HTML


```r
fluidPage(
  tags$h1("Meu Primeiro Shiny App"),
  tags$p(
    "",
    tags$a(href = "https://www.rstudio.com/shiny/", "rstudio.com/shiny."),
    tags$strong("Recomendo fortemente que dê uma olhada nele!!")
  )
)
```


```html
&lt;div class="container-fluid"&gt;
  &lt;h1&gt;Meu Primeiro Shiny App&lt;/h1&gt;
  &lt;p&gt;
    O link para o site do Shiny é
    &lt;a href="https://www.rstudio.com/shiny/"&gt;rstudio.com/shiny.&lt;/a&gt;
    &lt;strong&gt;Recomendo fortemente que dê uma olhada nele!!&lt;/strong&gt;
  &lt;/p&gt;
&lt;/div&gt;
```

---

## Mas antes... Tags de HTML


```r
names(tags)
```

```
##  [1] "a"                "abbr"             "address"          "animate"         
##  [5] "animateMotion"    "animateTransform" "area"             "article"         
##  [9] "aside"            "audio"            "b"                "base"            
## [13] "bdi"              "bdo"              "blockquote"       "body"            
## [17] "br"               "button"           "canvas"           "caption"         
## [21] "circle"           "cite"             "clipPath"         "code"            
## [25] "col"              "colgroup"         "color-profile"    "command"         
## [29] "data"             "datalist"         "dd"               "defs"            
## [33] "del"              "desc"             "details"          "dfn"             
## [37] "dialog"           "discard"          "div"              "dl"              
## [41] "dt"               "ellipse"          "em"               "embed"           
## [45] "eventsource"
```
...


```r
tags$h1("Meu Primeiro Shiny App")

## &lt;h1&gt;Meu Primeiro Shiny App&lt;/h1&gt;
```

---

## Mas antes... Tags de HTML

As tags mais comuns são:

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; R function &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; HTML &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; a() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; um hyperlink &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; hr() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; linha horizontal &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; br() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; quebra de linha &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; code() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; texto com estilo monoespaçado &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; h1(), ..., h6() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; cabeçalhos &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; img() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; imagem &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; p() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; parágrafo &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; em() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; texto em itálico &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; strong() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; texto em negrito &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Grid System

&lt;img src="img/gridsystem.jpg"&gt;

- Cada linha é um **`fluidRow()`**.
- **`columns`** são divididas em 12 partes iguais. O **`width`** determina quantas partes de largura a coluna vai ter.

.footnote[
fonte: [dzone.com/articles/working-with-bootstrap-4-grid-system-for-creating](https://dzone.com/articles/working-with-bootstrap-4-grid-system-for-creating)
]

--

Grid System vem do [Bootstrap Framework](https://getbootstrap.com.br/docs/4.1/getting-started/introduction/) do Twitter.

---

## Grid System

Duas principais funções de layout


```r
fluidRow()
```

```
## &lt;div class="row"&gt;&lt;/div&gt;
```


```r
column(2)
```

```
## &lt;div class="col-sm-2"&gt;&lt;/div&gt;
```

---

## tabPanels e tabsetPanels


```r
# ui
tabsetPanel(
  tabPanel("Gráfico", plotOutput("grafico")), 
  tabPanel("Sumário", verbatimTextOutput("sumario")), 
  tabPanel("Tabela", tableOutput("tabela"))
)
```

&lt;img src="img/tabsetpanel.png"&gt;

---

## pageWithSidebar Layout


```r
pageWithSidebar(
  headerPanel = headerPanel("Olá Shiny!"),
  
  sidebarPanel(
    sliderInput("n", "Tamanho da amostra:", min= 0, max=150, value=50)
  ),
  
  mainPanel(
    plotOutput("grafico_do_iris")
  )
)
```

&lt;img src = "img/sidebarpage.png"&gt;

---

## navbarPage Layout



```r
navbarPage(title = "Meu Site Navbar",
           tabPanel("a"),
           tabPanel("b"),
           tabPanel("c"),
           tabPanel("d")
)
```

output:

&lt;img src = "img/navbarpage.png"&gt;


---

## shinydashboard Layout

&lt;img src="img/dashexample.png"&gt;


.footnote[
fonte: [db.rstudio.com/dashboards/](https://db.rstudio.com/best-practices/dashboards/)
]
---

## shinydashboard Layout

### O template

.pull-left[


```r
ui &lt;- dashboardPage(
  dashboardHeader(),
  dashboardSidebar(),
  dashboardBody()
)

#server...
```

]

.pull-right[

&lt;img src="img/shinydashboard.png"&gt;

]

---

## shinydashboard Layout

.pull-left[

### box 


```r
box(
  title = "Histograma", ...
),
box(
  title = "Inputs", ...
)
```

&lt;img src="img/box.png"&gt;

]

.pull-right[

### tabBox 


```r
tabBox(
  title = "Densidades",
  tabPanel("Sepal.Length",..),
  tabPanel("Sepal.Width",...),
  tabPanel("Petal.Length",..),
  tabPanel("Petal.Width",...)
)
```


&lt;img src="img/tabbox.png"&gt;

]

---

## shinydashboard Layout


.pull-left[

### valueBox

&lt;img src="img/valuebox.png"&gt;

**`renderValueBox({}) + valueBoxOutput()`**

]

.pull-right[


### infoBox

&lt;img src="img/infobox.png"&gt;

**`renderInfoBox({}) + infoBoxOutput()`**

]


---

## shinydashboard Layout

### dashboardHeader 



```r
dashboardPage(
* dashboardHeader(title = "Iris Predictor"),
  
  dashboardSidebar(...),
  dashboardBody(...)
)

#server...
```

&lt;img src="img/dashboardHeader.png"&gt;



---

## shinydashboard Layout

#### dashboardSidebar + sidebarMenu + menuItem 


```r
dashboardSidebar(
    sidebarMenu(
      menuItem("Calculator", tabName = "calc"),
      menuItem("Descriptive", tabName = "desc")
    )
  )
```

#### dashboardBody + tabItems + tabItem


```r
dashboardBody(
    tabItems(
      tabItem(tabName = "calc",...),
      tabItem(tabName = "desc",...)
    )
)
```

---

## Exercício 1 (dificuldade média)

Reproduza a aba "Calculator" [desse dashboard (clique aqui!)](https://rseis.shinyapps.io/asnv-shiny/).

&lt;img src="img/dashtutorial.png"&gt;

---

## Exercício 2 (difícil!)

Reproduza a aba "Descriptive" [deste dashboard (clique  aqui!)](https://rseis.shinyapps.io/asnv-shiny/).

&lt;img src="img/dashtutorial2.png"&gt;


---

class: middle, center, inverse

# Shinyapps.io

---
class: middle, center

## Shinyapps.io

### Ao R!

&lt;img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" width = "300" height = "300"&gt;

---

## Referência

Este curso é baseado no [Garrett Grolemund's Shiny Tutorial](https://shiny.rstudio.com/tutorial/).
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "4:3"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
